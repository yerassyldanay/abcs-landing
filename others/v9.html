<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –∫–Ω–∏–≥–∞-—Ä–∞—Å–∫—Ä–∞—Å–∫–∞ | –¶–≤–µ—Ç–Ω—ã–µ –ò—Å—Ç–æ—Ä–∏–∏</title>
    
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Custom Styles inspired by sonnet.html -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #ffffff;
            color: #333;
            line-height: 1.6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Button Styles */
        .btn {
            padding: 10px 24px;
            border-radius: 25px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            text-align: center;
            display: inline-block;
            text-decoration: none;
        }
        .btn-primary {
            background-color: #4a6fdc;
            color: white;
        }
        .btn-primary:hover {
            background-color: #3a5dc0;
            transform: translateY(-2px);
        }
        .btn-secondary {
            background-color: #f8f9fa;
            color: #333;
            border: 1px solid #ddd;
        }
        .btn-secondary:hover {
            background-color: #e9ecef;
        }

        /* Section Title Styles */
        .section-title {
            color: #14365d;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 2rem;
            text-align: center;
            position: relative;
        }
        .section-title::after {
            content: '';
            display: block;
            width: 60px;
            height: 4px;
            background-color: #4a6fdc;
            margin: 15px auto 0;
            border-radius: 2px;
        }
        
        /* Book Card Styles */
        .book-card {
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .book-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.12);
        }
        .book-card-details { padding: 15px; }
        .book-card-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #14365d;
            margin-bottom: 5px;
            min-height: 56px; /* 2 lines of text */
        }
        .book-card-description {
            font-size: 0.9rem;
            color: #555;
            min-height: 54px; /* 3 lines of text */
        }

        /* Modal Styles */
        .modal {
            display: none; position: fixed; z-index: 100; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.7); justify-content: center; align-items: center; padding: 1rem;
        }
        .modal-content {
            position: relative; background-color: #fefefe; margin: auto; padding: 2rem; border-radius: 12px; max-width: 90%; max-height: 90vh; display: flex; flex-direction: column; align-items: center; overflow-y: auto;
        }
        .close-button {
            position: absolute; top: 15px; right: 25px; color: #aaa; font-size: 28px; font-weight: bold; cursor: pointer;
        }
        
        /* Product Detail Page Styles */
        .thumbnail.active {
            border-color: #4a6fdc;
        }
        .product-meta {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            margin-top: 25px;
        }
        .meta-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            font-size: 0.95rem;
        }
        .meta-item:last-child { margin-bottom: 0; }
        .meta-icon {
            width: 20px; height: 20px;
            margin-right: 10px;
            color: #4a6fdc;
            font-weight: bold;
        }
        #photo-preview {
            width: 100px; height: 100px; border-radius: 50%; background-size: cover; background-position: center; background-color: #e9ecef; border: 2px dashed #ced4da;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header -->
    <header class="bg-white/95 backdrop-blur-sm sticky top-0 z-40 shadow-md">
        <div class="container flex justify-between items-center py-4">
            <a href="#" id="home-link" class="text-2xl font-bold text-[#4a6fdc]">–¶–≤–µ—Ç–Ω—ã–µ –ò—Å—Ç–æ—Ä–∏–∏</a>
            <div id="main-nav" class="hidden md:flex items-center space-x-6 text-base">
                <a href="#series-emotions" class="text-gray-700 hover:text-[#4a6fdc] transition-colors font-medium">–≠–º–æ—Ü–∏–∏</a>
                <a href="#series-basic" class="text-gray-700 hover:text-[#4a6fdc] transition-colors font-medium">–û—Å–Ω–æ–≤—ã</a>
                <a href="#how-it-works" class="text-gray-700 hover:text-[#4a6fdc] transition-colors font-medium">–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç</a>
            </div>
            <a href="#" class="btn btn-primary order-btn">–ó–∞–∫–∞–∑–∞—Ç—å</a>
        </div>
    </header>

    <!-- Main Content Wrapper -->
    <div id="main-content">
        <!-- Hero Section -->
        <main class="py-20 md:py-28 text-center bg-[#f8f9fa]">
            <div class="container">
                <h1 class="text-4xl md:text-5xl font-bold text-[#14365d] leading-tight">
                    –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –∫–Ω–∏–≥–∞-—Ä–∞—Å–∫—Ä–∞—Å–∫–∞ —Å –æ–±—É—á–∞—é—â–∏–º —ç–ª–µ–º–µ–Ω—Ç–æ–º
                </h1>
                <p class="mt-4 text-lg md:text-xl text-gray-600 max-w-3xl mx-auto">
                    –ü–æ–¥–∞—Ä–∏—Ç–µ —Ä–µ–±–µ–Ω–∫—É —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ, –≥–¥–µ –æ–Ω —Å—Ç–∞–Ω–µ—Ç –≥–ª–∞–≤–Ω—ã–º –≥–µ—Ä–æ–µ–º —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏!
                </p>
                <div class="mt-8">
                    <a href="#series-emotions" class="btn btn-secondary text-lg">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–Ω–∏–≥–∏</a>
                </div>
            </div>
        </main>

        <!-- Series "Emotions" -->
        <section id="series-emotions" class="py-16 md:py-24">
            <div class="container">
                <h2 class="section-title">–°–µ—Ä–∏—è "–≠–º–æ—Ü–∏–∏"</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6">
                    <!-- Book Cards are generated by JS now -->
                </div>
            </div>
        </section>

        <!-- Series "Basic" -->
        <section id="series-basic" class="py-16 md:py-24 bg-[#f8f9fa]">
            <div class="container">
                <h2 class="section-title">–°–µ—Ä–∏—è "–û—Å–Ω–æ–≤—ã"</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                   <!-- Book Cards are generated by JS now -->
                </div>
            </div>
        </section>

        <!-- How It Works Section -->
        <section id="how-it-works" class="py-16 md:py-24">
            <div class="container">
                <h2 class="section-title">–ò–∑ –≤–∞—à–µ–≥–æ —Ñ–æ—Ç–æ ‚Äî –≤ —Å–∫–∞–∑–∫—É!</h2>
                <div class="flex flex-col md:flex-row items-center justify-center gap-8 md:gap-16 mt-12">
                    <div class="text-center">
                        <h3 class="text-2xl font-semibold mb-4 text-gray-700">1. –í–∞—à–µ —Ñ–æ—Ç–æ</h3>
                        <img src="bck_removed_1.png" alt="–ü—Ä–∏–º–µ—Ä –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏" class="rounded-xl max-w-xs w-full h-auto shadow-lg" onerror="this.onerror=null;this.src='https://placehold.co/400x565/dddddd/333333?text=Original+Photo';">
                    </div>
                    <div class="text-4xl font-bold text-[#4a6fdc] transform rotate-90 md:rotate-0">&rarr;</div>
                    <div class="text-center">
                        <h3 class="text-2xl font-semibold mb-4 text-gray-700">2. –ì–µ—Ä–æ–π –∫–Ω–∏–≥–∏</h3>
                        <img src="bck_removed_2.png" alt="–ü—Ä–∏–º–µ—Ä —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞" class="rounded-xl max-w-xs w-full h-auto shadow-lg" onerror="this.onerror=null;this.src='https://placehold.co/400x565/dddddd/333333?text=Book+Character';">
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Footer -->
        <footer class="bg-[#f8f9fa] border-t border-gray-200">
            <div class="container py-8 flex flex-wrap justify-between items-center gap-6">
                <div class="flex flex-wrap gap-x-6 gap-y-2 text-sm text-gray-600">
                    <a href="#" class="hover:text-[#4a6fdc]">–ü–æ–ª–æ–∂–µ–Ω–∏—è –∏ —É—Å–ª–æ–≤–∏—è</a>
                    <a href="#" class="hover:text-[#4a6fdc]">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>
                    <a href="#" class="hover:text-[#4a6fdc]">–û –Ω–∞—Å</a>
                </div>
                <div class="text-sm text-gray-500">
                    &copy; 2025 –¶–≤–µ—Ç–Ω—ã–µ –ò—Å—Ç–æ—Ä–∏–∏. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.
                </div>
            </div>
        </footer>
    </div>
    
    <!-- PRODUCT DETAIL PAGE (HIDDEN BY DEFAULT) -->
    <div id="product-detail-page" class="hidden">
       <section class="container py-8 md:py-12">
            <div class="mb-6 text-sm">
                <a href="#" id="back-to-main" class="text-gray-600 hover:text-[#4a6fdc] transition-colors">&larr; –ù–∞–∑–∞–¥ –∫–æ –≤—Å–µ–º –∫–Ω–∏–≥–∞–º</a>
            </div>
            <div class="flex flex-col md:flex-row gap-8 md:gap-12">
                <!-- Left: Gallery -->
                <div class="w-full md:w-1/2 lg:w-2/5">
                    <img id="detail-main-photo" src="" alt="–ì–ª–∞–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–Ω–∏–≥–∏" class="w-full h-auto object-contain rounded-lg shadow-lg border-2 border-gray-100 mb-4">
                    <div id="detail-thumbnail-container" class="flex gap-3 overflow-x-auto pb-2">
                        <!-- Thumbnails will be injected here -->
                    </div>
                </div>
                <!-- Right: Info -->
                <div class="w-full md:w-1/2 lg:w-3/5">
                    <h1 id="detail-title" class="text-4xl md:text-5xl font-bold text-[#14365d]"></h1>
                    <p id="detail-description" class="mt-4 text-base text-gray-600"></p>
                    
                    <div class="product-meta">
                         <div class="meta-item">
                            <span class="meta-icon">‚úì</span>
                            <span>–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –∏–º–µ–Ω–∏ –∏ —Ñ–æ—Ç–æ —Ä–µ–±–µ–Ω–∫–∞</span>
                        </div>
                        <div class="meta-item">
                            <span class="meta-icon">‚úì</span>
                            <span>–†–∞–∑–≤–∏–≤–∞–µ—Ç –≤–æ–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç</span>
                        </div>
                        <div class="meta-item">
                            <span class="meta-icon">‚úì</span>
                            <span>–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –¥–µ—Ç–µ–π –æ—Ç 3 –¥–æ 8 –ª–µ—Ç</span>
                        </div>
                        <div class="meta-item">
                            <span class="meta-icon">‚úì</span>
                            <span>–í—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –±—É–º–∞–≥–∞ –¥–ª—è —Ä–∞—Å–∫—Ä–∞—à–∏–≤–∞–Ω–∏—è</span>
                        </div>
                    </div>
                    
                    <div class="mt-8">
                        <button id="detail-order-btn" class="btn btn-primary text-lg">
                            –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑ –Ω–∞ —ç—Ç—É –∫–Ω–∏–≥—É
                        </button>
                    </div>
                </div>
            </div>
       </section>
       <!-- Recommendations Section -->
       <section id="recommendations" class="pt-16 md:pt-24 pb-8">
           <div class="container">
                <h2 class="section-title !text-2xl md:!text-3xl">–î—Ä—É–≥–∏–µ –∫–Ω–∏–≥–∏ –∏–∑ —ç—Ç–æ–π —Å–µ—Ä–∏–∏</h2>
                <div id="recommendations-container" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                    <!-- Recommended books will be injected here -->
                </div>
           </div>
       </section>
    </div>


    <!-- Main Order Modal -->
    <div id="orderModal" class="modal">
        <div class="modal-content max-w-2xl w-full">
            <span class="close-button order-modal-close">&times;</span>
            <h3 class="text-3xl font-bold mb-6 text-center text-[#14365d]">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h3>
            <form id="order-form" class="w-full text-base">
                <fieldset class="mb-6">
                    <legend class="text-xl font-semibold mb-4 w-full border-b pb-2 text-gray-700">1. –û –≥–µ—Ä–æ–µ –∫–Ω–∏–≥–∏</legend>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 items-center">
                        <div class="flex flex-col gap-4">
                             <input type="text" name="child_name" placeholder="–ò–º—è —Ä–µ–±–µ–Ω–∫–∞" required class="w-full px-4 py-2 border rounded-lg focus:ring-[#4a6fdc] focus:border-[#4a6fdc]">
                             <input type="number" name="child_age" placeholder="–í–æ–∑—Ä–∞—Å—Ç (–ª–µ—Ç)" min="1" max="12" required class="w-full px-4 py-2 border rounded-lg focus:ring-[#4a6fdc] focus:border-[#4a6fdc]">
                        </div>
                        <div class="flex flex-col items-center gap-2">
                            <div id="photo-preview"></div>
                            <label for="child_photo" class="btn btn-secondary !text-sm !py-2 w-full text-center">
                                –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ
                            </label>
                            <input type="file" name="child_photo" id="child_photo" class="hidden" accept="image/png, image/jpeg">
                        </div>
                    </div>
                </fieldset>
                
                <fieldset class="mb-6">
                    <legend class="text-xl font-semibold mb-4 w-full border-b pb-2 text-gray-700">2. –í—ã–±–µ—Ä–∏—Ç–µ –∫–Ω–∏–≥–∏</legend>
                    <div id="book-selection-list" class="grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-3">
                        <!-- Checkboxes will be dynamically inserted here -->
                    </div>
                </fieldset>

                 <fieldset class="mb-6">
                    <legend class="text-xl font-semibold mb-4 w-full border-b pb-2 text-gray-700">3. –î–ª—è —Å–≤—è–∑–∏ —Å –≤–∞–º–∏</legend>
                     <input type="tel" name="phone_number" placeholder="–í–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞" required class="w-full px-4 py-2 border rounded-lg focus:ring-[#4a6fdc] focus:border-[#4a6fdc]">
                </fieldset>

                <button type="submit" class="btn btn-primary w-full text-lg">
                    –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑
                </button>
            </form>
        </div>
    </div>


    <script>
    document.addEventListener('DOMContentLoaded', function () {
        
        // --- DATA ---
        const BOOKS_DATA = {
            "–≠–º–æ—Ü–∏–∏": [
                { id: "emotion-1", title: "–ì–Ω–µ–≤: –¢–∏–≥—Ä –í–Ω—É—Ç—Ä–∏", emoji: "üêÖ", short_desc: "–ì–Ω–µ–≤ –º–æ–∂–Ω–æ –æ—Ö–ª–∞–¥–∏—Ç—å –∏ –Ω–∞–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –¥–æ–±—Ä—ã–µ –ø–æ—Å—Ç—É–ø–∫–∏.", pages: "book_emotions_first_1.jpg,book_emotions_first_2.jpg,book_emotions_end.jpg", full_desc: "–≠—Ç–∞ –∏—Å—Ç–æ—Ä–∏—è —É—á–∏—Ç –º–∞–ª—ã—à–∞, —á—Ç–æ —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å –≥–Ω–µ–≤ ‚Äî —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ. –í–º–µ—Å—Ç–µ —Å –≥–ª–∞–≤–Ω–æ–π –≥–µ—Ä–æ–∏–Ω–µ–π –æ–Ω —É–∑–Ω–∞–µ—Ç, –∫–∞–∫ –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å –≥–æ—Ä—è—á–∏–µ –∏ —Ä–∞–∑—Ä—É—à–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ—Ä—ã–≤—ã –≤ —Å–æ–∑–∏–¥–∞—Ç–µ–ª—å–Ω—É—é —ç–Ω–µ—Ä–≥–∏—é, –Ω–∞—Ö–æ–¥—è –≤—ã—Ö–æ–¥ —Å–≤–æ–∏–º —ç–º–æ—Ü–∏—è–º –≤ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–µ –∏ –¥–æ–±—Ä—ã—Ö –¥–µ–ª–∞—Ö." },
                { id: "emotion-2", title: "–ì—Ä—É—Å—Ç—å: –°–ª—ë–∑—ã –°–ª–æ–Ω–∞", emoji: "üêò", short_desc: "–ü–µ—á–∞–ª—å –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å –Ω–∞—á–∞–ª–æ–º —á–µ–≥–æ-—Ç–æ –Ω–æ–≤–æ–≥–æ.", pages: "book_emotions_second_1.jpg,book_emotions_second_2.jpg,book_emotions_end.jpg", full_desc: "–ö–Ω–∏–≥–∞ –Ω–µ–∂–Ω–æ –æ–±—ä—è—Å–Ω—è–µ—Ç, —á—Ç–æ –≥—Ä—É—Å—Ç—å ‚Äî —ç—Ç–æ –≤–∞–∂–Ω–æ–µ —á—É–≤—Å—Ç–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ –Ω–µ –Ω—É–∂–Ω–æ –ø—Ä—è—Ç–∞—Ç—å. –ß–µ—Ä–µ–∑ –º–µ—Ç–∞—Ñ–æ—Ä—É —Å–ª—ë–∑, –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –≤—ã—Ä–∞—Å—Ç–∞—é—Ç —Ü–≤–µ—Ç—ã, —Ä–µ–±–µ–Ω–æ–∫ –ø–æ–Ω–∏–º–∞–µ—Ç, —á—Ç–æ –¥–∞–∂–µ –∏–∑ –ø–µ—á–∞–ª—å–Ω—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤ –º–æ–∂–µ—Ç —Ä–æ–¥–∏—Ç—å—Å—è —á—Ç–æ-—Ç–æ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–µ –∏ –Ω–æ–≤–æ–µ." },
                { id: "emotion-3", title: "–†–∞–¥–æ—Å—Ç—å: –®—É–º–Ω–∞—è –û–±–µ–∑—å—è–Ω–∫–∞", emoji: "üêí", short_desc: "–†–∞–¥–æ—Å—Ç—å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —è—Ä—á–µ, –∫–æ–≥–¥–∞ –µ—ë –¥–µ–ª–∏—à—å —Å –¥—Ä—É–∑—å—è–º–∏.", pages: "book_emotions_third_1.jpg,book_emotions_third_2.jpg,book_emotions_end.jpg", full_desc: "–≠—Ç–æ –≤–µ—Å—ë–ª–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ –æ —Ç–æ–º, –∫–∞–∫ –≤–∞–∂–Ω–æ –¥–µ–ª–∏—Ç—å—Å—è —Å–≤–æ–µ–π —Ä–∞–¥–æ—Å—Ç—å—é —Å –æ–∫—Ä—É–∂–∞—é—â–∏–º–∏. –ò—Å—Ç–æ—Ä–∏—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –∫–æ–≥–¥–∞ –º—ã –¥–∞—Ä–∏–º —Å—á–∞—Å—Ç—å–µ –¥—Ä—É–≥–∏–º, –Ω–∞—à–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å—á–∞—Å—Ç—å–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –±–æ–ª—å—à–µ –∏ —è—Ä—á–µ." },
                { id: "emotion-4", title: "–°—Ç—Ä–∞—Ö: –®—ë–ø–æ—Ç –≤ –¢–µ–Ω–∏", emoji: "ü¶â", short_desc: "–°—Ç—Ä–∞—Ö —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –∫ –Ω–µ–º—É –∏–¥—ë—à—å –Ω–∞–≤—Å—Ç—Ä–µ—á—É.", pages: "book_emotions_fourth_1.jpg,book_emotions_fourth_2.jpg,book_emotions_end.jpg", full_desc: "–ö–Ω–∏–≥–∞ –ø–æ–º–æ–≥–∞–µ—Ç –¥–µ—Ç—è–º —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è —Å–æ —Å—Ç—Ä–∞—Ö–∞–º–∏, –ø–æ–∫–∞–∑—ã–≤–∞—è, —á—Ç–æ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ—Å—Ç—å –ø—É–≥–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –º—ã –Ω–µ —Å–¥–µ–ª–∞–µ–º —à–∞–≥ –µ–π –Ω–∞–≤—Å—Ç—Ä–µ—á—É. –§–æ–Ω–∞—Ä–∏–∫ –∏ —Å–≤–µ—Ç–ª—è—á–∫–∏ —Å–∏–º–≤–æ–ª–∏–∑–∏—Ä—É—é—Ç —Å–º–µ–ª–æ—Å—Ç—å –∏ –∑–Ω–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –æ—Å–≤–µ—â–∞—é—Ç –ø—É—Ç—å." },
                { id: "emotion-5", title: "–£–¥–∏–≤–ª–µ–Ω–∏–µ: –ü—Ç–∏—Ü–∞ –ß—É–¥–µ—Å", emoji: "üê¶", short_desc: "–ö–∞–∂–¥–æ–µ ¬´–≤–∞—É!¬ª –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø—É—Ç—å –∫ –Ω–æ–≤—ã–º –æ—Ç–∫—Ä—ã—Ç–∏—è–º.", pages: "book_emotions_fifth_1.jpg,book_emotions_fifth_2.jpg,book_emotions_end.jpg", full_desc: "–≠—Ç–∞ –∏—Å—Ç–æ—Ä–∏—è –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—Ç –Ω–∞ –ª—é–±–æ–∑–Ω–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å. –û–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –º–∏—Ä –ø–æ–ª–æ–Ω —á—É–¥–µ—Å, –∏ –∫–∞–∂–¥–æ–µ —É–¥–∏–≤–ª–µ–Ω–∏–µ ‚Äî —ç—Ç–æ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –∫ –Ω–æ–≤–æ–º—É –æ—Ç–∫—Ä—ã—Ç–∏—é. –ö–Ω–∏–≥–∞ —É—á–∏—Ç —Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ –º–∏—Ä —à–∏—Ä–æ–∫–æ –æ—Ç–∫—Ä—ã—Ç—ã–º–∏ –≥–ª–∞–∑–∞–º–∏." }
            ],
            "–û—Å–Ω–æ–≤—ã": [
                { id: "basic-1", title: "–†—ã—Ü–∞—Ä—å –ú—ã–ª—å–Ω–æ–≥–æ –ö–ª–∏–Ω–∫–∞", emoji: "üíß", short_desc: "–ö–∞–∫ –º—ã—Ç—å—ë —Ä—É–∫ —Å–ø–∞—Å–∞–µ—Ç —Ü–µ–ª–æ–µ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ.", pages: "book_basic_first_1.jpg,book_basic_first_2.jpg,book_basic_end.jpg", full_desc: "–í —ç—Ç–æ–π —Å–∫–∞–∑–∫–µ –º—ã—Ç—å—ë —Ä—É–∫ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ —ç–ø–∏—á–µ—Å–∫—É—é –±–∏—Ç–≤—É –∑–∞ —á–∏—Å—Ç–æ—Ç—É! –†–µ–±–µ–Ω–æ–∫ –≤ —Ä–æ–ª–∏ –æ—Ç–≤–∞–∂–Ω–æ–≥–æ —Ä—ã—Ü–∞—Ä—è —Å—Ä–∞–∂–∞–µ—Ç—Å—è —Å –∞—Ä–º–∏–µ–π –º–∏–∫—Ä–æ–±–æ–≤, –¥–µ–ª–∞—è –≤–∞–∂–Ω—É—é –≥–∏–≥–∏–µ–Ω–∏—á–µ—Å–∫—É—é –ø—Ä–æ—Ü–µ–¥—É—Ä—É –≤–µ—Å—ë–ª–æ–π –∏ —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ–π." },
                { id: "basic-2", title: "–†—ã—Ü–∞—Ä—å –ó—É–±–Ω–æ–≥–æ –ö–ª–∏–Ω–∫–∞", emoji: "ü¶∑", short_desc: "–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —á–∏—Å—Ç–∫–∞ –∑—É–±–æ–≤ ‚Äî –ª—É—á—à–∞—è –∑–∞—â–∏—Ç–∞.", pages: "book_basic_second_1.jpg,book_basic_second_2.jpg,book_basic_end.jpg", full_desc: "–ó–∞–±—É–¥—å—Ç–µ –æ –∫–∞–ø—Ä–∏–∑–∞—Ö –≤–æ –≤—Ä–µ–º—è —á–∏—Å—Ç–∫–∏ –∑—É–±–æ–≤! –≠—Ç–∞ –∏—Å—Ç–æ—Ä–∏—è –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –∑—É–±–Ω—É—é —â—ë—Ç–∫—É –≤ –≤–æ–ª—à–µ–±–Ω—ã–π –±–æ—Ä–¥, –∞ —Ä–µ–±—ë–Ω–∫–∞ ‚Äî –≤ –∑–∞—â–∏—Ç–Ω–∏–∫–∞ —Å–∫–∞–∑–æ—á–Ω–æ–≥–æ –∑–∞–º–∫–∞. –ö–Ω–∏–≥–∞ –≤ –∏–≥—Ä–æ–≤–æ–π —Ñ–æ—Ä–º–µ –æ–±—ä—è—Å–Ω—è–µ—Ç –≤–∞–∂–Ω–æ—Å—Ç—å —É—Ö–æ–¥–∞ –∑–∞ –∑—É–±–∞–º–∏." },
                { id: "basic-3", title: "–ö—Ä–µ—Å—Ç–æ–Ω–æ—Å–µ—Ü –ü—É–∑—ã—Ä–µ–π", emoji: "üõÅ", short_desc: "–ö—É–ø–∞–Ω–∏–µ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –æ–±—ã—á–Ω—ã–π –¥–µ–Ω—å –≤ –ø—Ä–∞–∑–¥–Ω–∏–∫.", pages: "book_basic_third_1.jpg,book_basic_third_2.jpg,book_basic_end.jpg", full_desc: "–ë–æ–ª—å—à–µ –Ω–∏–∫–∞–∫–∏—Ö —É–≥–æ–≤–æ—Ä–æ–≤ –ø–æ–π—Ç–∏ –∫—É–ø–∞—Ç—å—Å—è! –í —ç—Ç–æ–π –∫–Ω–∏–≥–µ –≤–∞–Ω–Ω–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ª–µ—Ç–∞—é—â–∏–º –∫–æ—Ä–∞–±–ª—ë–º, –∞ –º—ã–ª—å–Ω—ã–µ –ø—É–∑—ã—Ä–∏ ‚Äî –≤–æ–ª—à–µ–±–Ω—ã–º –æ—Ä—É–∂–∏–µ–º –ø—Ä–æ—Ç–∏–≤ –≥—Ä—è–∑–µ–≤—ã—Ö –º–æ–Ω—Å—Ç—Ä–æ–≤. –ö—É–ø–∞–Ω–∏–µ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –≤–µ—Å—ë–ª—É—é –∏–≥—Ä—É." },
                { id: "basic-4", title: "–†—ã—Ü–∞—Ä—å –ü—Ä–∞—á–µ—á–Ω–æ–π", emoji: "üëï", short_desc: "–°–≤–µ–∂–∞—è –æ–¥–µ–∂–¥–∞ –¥–∞—Ä–∏—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –∏ –ø–æ—Ä—è–¥–æ–∫.", pages: "book_basic_fourth_1.jpg,book_basic_fourth_2.jpg,book_basic_end.jpg", full_desc: "–≠—Ç–∞ –∏—Å—Ç–æ—Ä–∏—è —É—á–∏—Ç —Ä–µ–±—ë–Ω–∫–∞ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ—Å—Ç–∏ –∏ –ª—é–±–≤–∏ –∫ –ø–æ—Ä—è–¥–∫—É. –ß–∏—Å—Ç–∞—è –æ–¥–µ–∂–¥–∞ ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å–∫—É—á–Ω–∞—è –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç—å, –∞ –¥–æ—Å–ø–µ—Ö–∏, –∫–æ—Ç–æ—Ä—ã–µ –¥–∞—Ä—è—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –∏ —Å–∏–ª—É –¥–ª—è –Ω–æ–≤—ã—Ö —Å–≤–µ—Ä—à–µ–Ω–∏–π." }
            ]
        };
        
        // --- PAGE ELEMENTS ---
        const mainContent = document.getElementById('main-content');
        const productDetailPage = document.getElementById('product-detail-page');
        const backToMainBtn = document.getElementById('back-to-main');
        const homeLink = document.getElementById('home-link');
        const detailMainPhoto = document.getElementById('detail-main-photo');
        const detailThumbnailContainer = document.getElementById('detail-thumbnail-container');
        const detailTitle = document.getElementById('detail-title');
        const detailDescription = document.getElementById('detail-description');
        const detailOrderBtn = document.getElementById('detail-order-btn');
        const recommendationsContainer = document.getElementById('recommendations-container');
        const orderModal = document.getElementById('orderModal');
        const orderForm = document.getElementById('order-form');
        const photoInput = document.getElementById('child_photo');
        const photoPreview = document.getElementById('photo-preview');
        const bookSelectionList = document.getElementById('book-selection-list');
        const orderModalCloseBtn = document.querySelector('.order-modal-close');

        // --- FUNCTIONS ---
        const showMainPage = () => {
            mainContent.style.display = 'block';
            productDetailPage.style.display = 'none';
            window.scrollTo(0, 0);
        };
        
        const createBookCard = (bookData, seriesName) => {
            const card = document.createElement('div');
            card.className = 'book-card cursor-pointer';
            card.dataset.bookId = bookData.id;
            
            card.innerHTML = `
                <img src="${bookData.pages.split(',')[0]}" alt="${bookData.title}" class="w-full h-auto object-cover" onerror="this.onerror=null;this.src='https://placehold.co/400x565/dddddd/333333?text=...';">
                <div class="book-card-details">
                    <h3 class="book-card-title">${bookData.emoji} ${bookData.title}</h3>
                    <p class="book-card-description">${bookData.short_desc}</p>
                </div>
            `;
            card.addEventListener('click', () => showProductPage(bookData, seriesName));
            return card;
        };
        
        const showProductPage = (bookData, seriesName) => {
            detailTitle.textContent = bookData.title;
            detailDescription.textContent = bookData.full_desc;
            detailMainPhoto.src = bookData.pages.split(',')[0];
            detailOrderBtn.dataset.bookId = bookData.id; 

            // Thumbnails
            detailThumbnailContainer.innerHTML = ''; 
            const pages = bookData.pages.split(',');
            pages.forEach((pageSrc, index) => {
                const thumb = document.createElement('img');
                thumb.src = pageSrc;
                thumb.className = 'w-20 h-auto object-cover rounded-md cursor-pointer border-2 border-transparent hover:border-[#4a6fdc] transition-all thumbnail';
                if (index === 0) thumb.classList.add('active');
                thumb.addEventListener('click', () => {
                    detailMainPhoto.src = pageSrc;
                    detailThumbnailContainer.querySelectorAll('.thumbnail').forEach(t => t.classList.remove('active'));
                    thumb.classList.add('active');
                });
                detailThumbnailContainer.appendChild(thumb);
            });
            
            // Recommendations
            recommendationsContainer.innerHTML = '';
            BOOKS_DATA[seriesName].forEach(otherBook => {
                if (otherBook.id !== bookData.id) {
                    const recCard = createBookCard(otherBook, seriesName);
                    recommendationsContainer.appendChild(recCard);
                }
            });

            mainContent.style.display = 'none';
            productDetailPage.style.display = 'block';
            window.scrollTo(0, 0);
        };

        // --- INITIALIZATION ---
        for (const seriesName in BOOKS_DATA) {
            const containerId = seriesName === '–≠–º–æ—Ü–∏–∏' ? 'series-emotions' : 'series-basic';
            const container = document.querySelector(`#${containerId} .grid`);
            BOOKS_DATA[seriesName].forEach(book => {
                const card = createBookCard(book, seriesName);
                container.appendChild(card);
            });
        }
        
        // Populate order form
        for (const seriesName in BOOKS_DATA) {
            const seriesTitle = document.createElement('h4');
            seriesTitle.className = 'col-span-full font-semibold text-gray-800 mt-2 text-lg';
            seriesTitle.textContent = `–°–µ—Ä–∏—è "${seriesName}"`;
            bookSelectionList.appendChild(seriesTitle);
            BOOKS_DATA[seriesName].forEach(book => {
                const label = document.createElement('label');
                label.className = 'flex items-center space-x-3 cursor-pointer text-gray-700';
                label.innerHTML = `<input type="checkbox" name="selected_books" value="${book.id}" class="h-5 w-5 rounded border-gray-300 text-[#4a6fdc] focus:ring-[#4a6fdc]"><span>${book.title}</span>`;
                bookSelectionList.appendChild(label);
            });
        }

        // --- EVENT BINDING ---
        backToMainBtn.addEventListener('click', (e) => { e.preventDefault(); showMainPage(); });
        homeLink.addEventListener('click', (e) => {
            e.preventDefault();
            if (productDetailPage.style.display === 'block') showMainPage();
            else window.scrollTo({ top: 0, behavior: 'smooth' });
        });
        
        const openModal = (modal) => { modal.style.display = 'flex'; };
        const closeModal = (modal) => { modal.style.display = 'none'; };
        
        detailOrderBtn.addEventListener('click', (e) => {
            openModal(orderModal);
            document.querySelectorAll('#book-selection-list input[type="checkbox"]').forEach(cb => cb.checked = false);
            const checkbox = document.querySelector(`input[type="checkbox"][value="${e.target.dataset.bookId}"]`);
            if (checkbox) checkbox.checked = true;
        });
        
        document.querySelectorAll('.order-btn').forEach(b => b.addEventListener('click', (e) => { e.preventDefault(); openModal(orderModal); }));
        orderModalCloseBtn.addEventListener('click', () => closeModal(orderModal));
        
        photoInput.addEventListener('change', function() {
            if (this.files && this.files[0]) {
                const reader = new FileReader();
                reader.onload = (e) => photoPreview.style.backgroundImage = `url('${e.target.result}')`;
                reader.readAsDataURL(this.files[0]);
            }
        });

        orderForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const formData = new FormData(orderForm);
            const selectedBooks = formData.getAll('selected_books');
            if (selectedBooks.length === 0) { alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É –∫–Ω–∏–≥—É.'); return; }
            let message = `–°–ø–∞—Å–∏–±–æ –∑–∞ –∑–∞–∫–∞–∑!\n\n`+`–ò–º—è —Ä–µ–±–µ–Ω–∫–∞: ${formData.get('child_name')}\n`+`–í–æ–∑—Ä–∞—Å—Ç: ${formData.get('child_age')}\n`+`–¢–µ–ª–µ—Ñ–æ–Ω: ${formData.get('phone_number')}\n`+`–í—ã–±—Ä–∞–Ω–Ω—ã–µ –∫–Ω–∏–≥–∏: ${selectedBooks.join(', ')}\n`;
            if (formData.get('child_photo').name) { message += `–§–æ—Ç–æ: ${formData.get('child_photo').name}\n`; }
            alert(message);
            orderForm.reset();
            photoPreview.style.backgroundImage = '';
            closeModal(orderModal);
        });

        window.addEventListener('click', (event) => { if (event.target == orderModal) closeModal(orderModal); });
        document.addEventListener('keydown', (event) => { if (event.key === "Escape") closeModal(orderModal); });
    });
    </script>
</body>
</html>

