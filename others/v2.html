<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–∞—Å–∫—Ä–∞—Å–∫–∏ | –£—á–∏–º—Å—è —á–µ—Ä–µ–∑ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ</title>
    
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Custom Styles -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDF8F0; /* Creamy background */
            color: #383838;
        }
        .brand-gradient {
            background: linear-gradient(90deg, #FF8C42, #FFD36E);
        }
        .brand-gradient-text {
             background: linear-gradient(90deg, #FF8C42, #FFD36E);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        html {
            scroll-behavior: smooth;
        }
        .transition-transform {
            transition: transform 0.3s ease-in-out;
        }
        .hover\:scale-105:hover {
            transform: scale(1.05);
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 50;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.7);
            justify-content: center;
            align-items: center;
            padding: 1rem;
        }
        .modal-content {
            position: relative;
            background-color: #fefefe;
            margin: auto;
            padding: 2rem;
            border-radius: 12px;
            max-width: 90%;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-y: auto;
        }
        .modal-image {
            width: auto;
            max-height: 70vh;
            object-fit: contain;
            border-radius: 8px;
        }
        .close-button {
            position: absolute;
            top: 15px;
            right: 25px;
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        .close-button:hover,
        .close-button:focus {
            color: black;
        }
        /* Style for photo preview */
        #photo-preview {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background-size: cover;
            background-position: center;
            background-color: #e9ecef;
            border: 2px dashed #ced4da;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header -->
    <header class="bg-white/80 backdrop-blur-md sticky top-0 z-40 shadow-sm">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-2xl font-bold brand-gradient-text">–¶–≤–µ—Ç–Ω—ã–µ –ò—Å—Ç–æ—Ä–∏–∏</a>
            <div class="hidden md:flex items-center space-x-6">
                <a href="#series-emotions" class="text-gray-600 hover:text-orange-500 transition-colors">–°–µ—Ä–∏—è "–≠–º–æ—Ü–∏–∏"</a>
                <a href="#series-basic" class="text-gray-600 hover:text-orange-500 transition-colors">–°–µ—Ä–∏—è "–û—Å–Ω–æ–≤—ã"</a>
            </div>
            <a href="#" class="hidden md:inline-block px-6 py-2 text-white font-semibold rounded-full brand-gradient shadow-lg hover:shadow-xl transition-shadow order-btn">–ó–∞–∫–∞–∑–∞—Ç—å</a>
        </nav>
    </header>

    <!-- Hero Section -->
    <main class="container mx-auto px-6 py-16 md:py-24 text-center">
        <h1 class="text-4xl md:text-6xl font-extrabold leading-tight">
            –ü–æ–¥–∞—Ä–∏—Ç–µ —Ä–µ–±–µ–Ω–∫—É <span class="brand-gradient-text">–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é —Å–∫–∞–∑–∫—É</span>
        </h1>
        <p class="mt-6 text-lg md:text-xl text-gray-600 max-w-3xl mx-auto">
            –û—Ç–∫—Ä–æ–π—Ç–µ –¥–ª—è —Å–≤–æ–µ–≥–æ –º–∞–ª—ã—à–∞ –≤–æ–ª—à–µ–±–Ω—É—é –≤—Å–µ–ª–µ–Ω–Ω—É—é, –≥–¥–µ –∫–∞–∂–¥–∞—è —Ä–∞—Å–∫—Ä–∞—Å–∫–∞ ‚Äî —ç—Ç–æ —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è —Å –Ω–∏–º –≤ –≥–ª–∞–≤–Ω–æ–π —Ä–æ–ª–∏. –ù–∞—à–∏ –∫–Ω–∏–≥–∏ –ø–æ–º–æ–≥—É—Ç —Ä–∞–∑–≤–∏—Ç—å –≤–æ–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –∏–∑—É—á–∏—Ç—å —ç–º–æ—Ü–∏–∏ –∏ –æ—Å–≤–æ–∏—Ç—å –≤–∞–∂–Ω—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏.
        </p>
        <div class="mt-10 flex justify-center items-center gap-4">
             <a href="#series-emotions" class="px-8 py-4 text-gray-700 font-bold bg-white border border-gray-200 rounded-full shadow-md hover:shadow-lg transition-shadow transform hover:scale-105">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–Ω–∏–≥–∏</a>
        </div>
    </main>

    <!-- Series Sections -->
    <section id="series-emotions" class="py-16 md:py-24 bg-white">
        <div class="container mx-auto px-6">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold">üìö –°–µ—Ä–∏—è "–≠–º–æ—Ü–∏–∏"</h2>
                <p class="mt-4 text-gray-600 max-w-2xl mx-auto">–ü–æ–º–æ–≥–∞–µ–º –¥–µ—Ç—è–º –ø–æ–Ω—è—Ç—å –∏ –ø–æ–¥—Ä—É–∂–∏—Ç—å—Å—è —Å–æ —Å–≤–æ–∏–º–∏ —á—É–≤—Å—Ç–≤–∞–º–∏ —á–µ—Ä–µ–∑ –≤–æ–ª—à–µ–±–Ω—ã–µ –∏—Å—Ç–æ—Ä–∏–∏.</p>
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-8">
                <!-- Emotions Book Cards -->
                <div class="bg-amber-50 rounded-xl p-6 shadow-md hover:shadow-2xl transition-shadow transition-transform hover:scale-105 cursor-pointer book-card" data-img-src="book_emotions_first_1.jpg" data-title="–ì–Ω–µ–≤: –¢–∏–≥—Ä –í–Ω—É—Ç—Ä–∏" data-book-id="emotion-1">
                    <img src="book_emotions_first_1.jpg" alt="–ì–Ω–µ–≤: –¢–∏–≥—Ä –í–Ω—É—Ç—Ä–∏" class="w-full rounded-lg mb-4" style="aspect-ratio: 1414 / 2000;" onerror="this.onerror=null;this.src='https://placehold.co/400x565/FFC107/FFFFFF?text=–¢–∏–≥—Ä';">
                    <h3 class="text-xl font-bold text-orange-600">üêÖ –ì–Ω–µ–≤: –¢–∏–≥—Ä –í–Ω—É—Ç—Ä–∏</h3>
                </div>
                <div class="bg-sky-50 rounded-xl p-6 shadow-md hover:shadow-2xl transition-shadow transition-transform hover:scale-105 cursor-pointer book-card" data-img-src="book_emotions_second_1.jpg" data-title="–ì—Ä—É—Å—Ç—å: –°–ª—ë–∑—ã –°–ª–æ–Ω–∞" data-book-id="emotion-2">
                    <img src="book_emotions_second_1.jpg" alt="–ì—Ä—É—Å—Ç—å: –°–ª—ë–∑—ã –°–ª–æ–Ω–∞" class="w-full rounded-lg mb-4" style="aspect-ratio: 1414 / 2000;" onerror="this.onerror=null;this.src='https://placehold.co/400x565/3B82F6/FFFFFF?text=–°–ª–æ–Ω';">
                    <h3 class="text-xl font-bold text-sky-600">üêò –ì—Ä—É—Å—Ç—å: –°–ª—ë–∑—ã –°–ª–æ–Ω–∞</h3>
                </div>
                <div class="bg-yellow-50 rounded-xl p-6 shadow-md hover:shadow-2xl transition-shadow transition-transform hover:scale-105 cursor-pointer book-card" data-img-src="book_emotions_third_1.jpg" data-title="–†–∞–¥–æ—Å—Ç—å: –®—É–º–Ω–∞—è –û–±–µ–∑—å—è–Ω–∫–∞" data-book-id="emotion-3">
                    <img src="book_emotions_third_1.jpg" alt="–†–∞–¥–æ—Å—Ç—å: –®—É–º–Ω–∞—è –û–±–µ–∑—å—è–Ω–∫–∞" class="w-full rounded-lg mb-4" style="aspect-ratio: 1414 / 2000;" onerror="this.onerror=null;this.src='https://placehold.co/400x565/FBBF24/FFFFFF?text=–û–±–µ–∑—å—è–Ω–∫–∞';">
                    <h3 class="text-xl font-bold text-yellow-600">üêí –†–∞–¥–æ—Å—Ç—å: –®—É–º–Ω–∞—è –û–±–µ–∑—å—è–Ω–∫–∞</h3>
                </div>
                <div class="bg-indigo-50 rounded-xl p-6 shadow-md hover:shadow-2xl transition-shadow transition-transform hover:scale-105 cursor-pointer book-card" data-img-src="book_emotions_fourth_1.jpg" data-title="–°—Ç—Ä–∞—Ö: –®—ë–ø–æ—Ç –≤ –¢–µ–Ω–∏" data-book-id="emotion-4">
                    <img src="book_emotions_fourth_1.jpg" alt="–°—Ç—Ä–∞—Ö: –®—ë–ø–æ—Ç –≤ –¢–µ–Ω–∏" class="w-full rounded-lg mb-4" style="aspect-ratio: 1414 / 2000;" onerror="this.onerror=null;this.src='https://placehold.co/400x565/6366F1/FFFFFF?text=–°–æ–≤–∞';">
                    <h3 class="text-xl font-bold text-indigo-600">ü¶â –°—Ç—Ä–∞—Ö: –®—ë–ø–æ—Ç –≤ –¢–µ–Ω–∏</h3>
                </div>
                 <div class="bg-teal-50 rounded-xl p-6 shadow-md hover:shadow-2xl transition-shadow transition-transform hover:scale-105 cursor-pointer book-card" data-img-src="book_emotions_fifth_1.jpg" data-title="–£–¥–∏–≤–ª–µ–Ω–∏–µ: –ü—Ç–∏—Ü–∞ –ß—É–¥–µ—Å" data-book-id="emotion-5">
                    <img src="book_emotions_fifth_1.jpg" alt="–£–¥–∏–≤–ª–µ–Ω–∏–µ: –ü—Ç–∏—Ü–∞ –ß—É–¥–µ—Å" class="w-full rounded-lg mb-4" style="aspect-ratio: 1414 / 2000;" onerror="this.onerror=null;this.src='https://placehold.co/400x565/14B8A6/FFFFFF?text=–ü—Ç–∏—Ü–∞';">
                    <h3 class="text-xl font-bold text-teal-600">üê¶ –£–¥–∏–≤–ª–µ–Ω–∏–µ: –ü—Ç–∏—Ü–∞ –ß—É–¥–µ—Å</h3>
                </div>
            </div>
        </div>
    </section>

    <section id="series-basic" class="py-16 md:py-24">
        <div class="container mx-auto px-6">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold">üìö –°–µ—Ä–∏—è "–û—Å–Ω–æ–≤—ã"</h2>
                <p class="mt-4 text-gray-600 max-w-2xl mx-auto">–ü—Ä–µ–≤—Ä–∞—â–∞–µ–º –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —Ä–∏—Ç—É–∞–ª—ã –≤ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—é—â–∏–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è —Å –æ—Ç–≤–∞–∂–Ω—ã–º–∏ —Ä—ã—Ü–∞—Ä—è–º–∏ —á–∏—Å—Ç–æ—Ç—ã.</p>
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                <!-- Basic Book Cards -->
                <div class="bg-blue-50 rounded-xl p-6 shadow-md hover:shadow-2xl transition-shadow transition-transform hover:scale-105 cursor-pointer book-card" data-img-src="book_basic_first_1.jpg" data-title="–†—ã—Ü–∞—Ä—å –ú—ã–ª—å–Ω–æ–≥–æ –ö–ª–∏–Ω–∫–∞" data-book-id="basic-1">
                    <img src="book_basic_first_1.jpg" alt="–†—ã—Ü–∞—Ä—å –ú—ã–ª—å–Ω–æ–≥–æ –ö–ª–∏–Ω–∫–∞" class="w-full rounded-lg mb-4" style="aspect-ratio: 1414 / 2000;" onerror="this.onerror=null;this.src='https://placehold.co/400x565/3B82F6/FFFFFF?text=–ú—ã—Ç—å—ë%20—Ä—É–∫';">
                    <h3 class="text-xl font-bold text-blue-600">üíß –†—ã—Ü–∞—Ä—å –ú—ã–ª—å–Ω–æ–≥–æ –ö–ª–∏–Ω–∫–∞</h3>
                </div>
                <div class="bg-green-50 rounded-xl p-6 shadow-md hover:shadow-2xl transition-shadow transition-transform hover:scale-105 cursor-pointer book-card" data-img-src="book_basic_second_1.jpg" data-title="–†—ã—Ü–∞—Ä—å –ó—É–±–Ω–æ–≥–æ –ö–ª–∏–Ω–∫–∞" data-book-id="basic-2">
                    <img src="book_basic_second_1.jpg" alt="–†—ã—Ü–∞—Ä—å –ó—É–±–Ω–æ–≥–æ –ö–ª–∏–Ω–∫–∞" class="w-full rounded-lg mb-4" style="aspect-ratio: 1414 / 2000;" onerror="this.onerror=null;this.src='https://placehold.co/400x565/22C55E/FFFFFF?text=–ß–∏—Å—Ç–∫–∞%20–∑—É–±–æ–≤';">
                    <h3 class="text-xl font-bold text-green-600">ü¶∑ –†—ã—Ü–∞—Ä—å –ó—É–±–Ω–æ–≥–æ –ö–ª–∏–Ω–∫–∞</h3>
                </div>
                <div class="bg-cyan-50 rounded-xl p-6 shadow-md hover:shadow-2xl transition-shadow transition-transform hover:scale-105 cursor-pointer book-card" data-img-src="book_basic_third_1.jpg" data-title="–ö—Ä–µ—Å—Ç–æ–Ω–æ—Å–µ—Ü –ü—É–∑—ã—Ä–µ–π" data-book-id="basic-3">
                    <img src="book_basic_third_1.jpg" alt="–ö—Ä–µ—Å—Ç–æ–Ω–æ—Å–µ—Ü –ü—É–∑—ã—Ä–µ–π" class="w-full rounded-lg mb-4" style="aspect-ratio: 1414 / 2000;" onerror="this.onerror=null;this.src='https://placehold.co/400x565/06B6D4/FFFFFF?text=–ö—É–ø–∞–Ω–∏–µ';">
                    <h3 class="text-xl font-bold text-cyan-600">üõÅ –ö—Ä–µ—Å—Ç–æ–Ω–æ—Å–µ—Ü –ü—É–∑—ã—Ä–µ–π</h3>
                </div>
                <div class="bg-purple-50 rounded-xl p-6 shadow-md hover:shadow-2xl transition-shadow transition-transform hover:scale-105 cursor-pointer book-card" data-img-src="book_basic_fourth_1.jpg" data-title="–†—ã—Ü–∞—Ä—å –ü—Ä–∞—á–µ—á–Ω–æ–π" data-book-id="basic-4">
                    <img src="book_basic_fourth_1.jpg" alt="–†—ã—Ü–∞—Ä—å –ü—Ä–∞—á–µ—á–Ω–æ–π" class="w-full rounded-lg mb-4" style="aspect-ratio: 1414 / 2000;" onerror="this.onerror=null;this.src='https://placehold.co/400x565/8B5CF6/FFFFFF?text=–ß–∏—Å—Ç–∞—è%20–æ–¥–µ–∂–¥–∞';">
                    <h3 class="text-xl font-bold text-purple-600">üëï –†—ã—Ü–∞—Ä—å –ü—Ä–∞—á–µ—á–Ω–æ–π</h3>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200 mt-16">
        <div class="container mx-auto px-6 py-8 text-center text-gray-500">
            <p>&copy; 2025 –¶–≤–µ—Ç–Ω—ã–µ –ò—Å—Ç–æ—Ä–∏–∏. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        </div>
    </footer>

    <!-- Image Modal -->
    <div id="imageModal" class="modal">
        <div class="modal-content max-w-lg">
            <span class="close-button image-modal-close">&times;</span>
            <img class="modal-image" id="modalImageSrc" src="" alt="—É–≤–µ–ª–∏—á–µ–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">
            <h3 id="modalTitle" class="mt-4 text-2xl font-bold text-center"></h3>
            <button class="mt-6 px-8 py-3 text-white font-bold rounded-full brand-gradient shadow-lg hover:shadow-xl transition-shadow transform hover:scale-105 order-from-modal-btn">
                –ó–∞–∫–∞–∑–∞—Ç—å —ç—Ç—É –∫–Ω–∏–≥—É
            </button>
        </div>
    </div>

    <!-- Main Order Modal -->
    <div id="orderModal" class="modal">
        <div class="modal-content max-w-2xl w-full">
            <span class="close-button order-modal-close">&times;</span>
            <h3 class="text-2xl md:text-3xl font-bold mb-6 text-center">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h3>
            <form id="order-form" class="w-full">
                <!-- Step 1: Child Info -->
                <fieldset class="mb-6">
                    <legend class="text-xl font-semibold mb-4 w-full border-b pb-2">1. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ–±–µ–Ω–∫–µ</legend>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 items-center">
                        <div class="flex flex-col gap-4">
                             <input type="text" name="child_name" placeholder="–ò–º—è —Ä–µ–±–µ–Ω–∫–∞" required class="w-full px-4 py-2 border rounded-lg focus:ring-orange-400 focus:border-orange-400">
                             <input type="number" name="child_age" placeholder="–í–æ–∑—Ä–∞—Å—Ç (–ª–µ—Ç)" min="1" max="12" required class="w-full px-4 py-2 border rounded-lg focus:ring-orange-400 focus:border-orange-400">
                        </div>
                        <div class="flex flex-col items-center gap-2">
                            <div id="photo-preview"></div>
                            <label for="child_photo" class="cursor-pointer text-sm text-center text-white bg-gray-500 hover:bg-gray-600 font-semibold py-2 px-4 rounded-lg transition-colors">
                                –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ
                            </label>
                            <input type="file" name="child_photo" id="child_photo" class="hidden" accept="image/png, image/jpeg">
                        </div>
                    </div>
                </fieldset>
                
                <!-- Step 2: Book Selection -->
                <fieldset class="mb-6">
                    <legend class="text-xl font-semibold mb-4 w-full border-b pb-2">2. –í—ã–±–µ—Ä–∏—Ç–µ –∫–Ω–∏–≥–∏</legend>
                    <div id="book-selection-list" class="grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-3">
                        <!-- Checkboxes will be dynamically inserted here -->
                    </div>
                </fieldset>

                <!-- Step 3: Contact Info -->
                 <fieldset class="mb-6">
                    <legend class="text-xl font-semibold mb-4 w-full border-b pb-2">3. –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</legend>
                     <input type="tel" name="phone_number" placeholder="–í–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞" required class="w-full px-4 py-2 border rounded-lg focus:ring-orange-400 focus:border-orange-400">
                </fieldset>

                <button type="submit" class="w-full mt-4 px-8 py-3 text-white font-bold text-lg rounded-full brand-gradient shadow-lg hover:shadow-xl transition-shadow">
                    –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑
                </button>
            </form>
        </div>
    </div>


    <script>
    document.addEventListener('DOMContentLoaded', function () {
        
        // --- DATA: All books available ---
        const ALL_BOOKS = {
            "–°–µ—Ä–∏—è –≠–º–æ—Ü–∏–∏": [
                { id: "emotion-1", title: "–ì–Ω–µ–≤: –¢–∏–≥—Ä –í–Ω—É—Ç—Ä–∏" },
                { id: "emotion-2", title: "–ì—Ä—É—Å—Ç—å: –°–ª—ë–∑—ã –°–ª–æ–Ω–∞" },
                { id: "emotion-3", title: "–†–∞–¥–æ—Å—Ç—å: –®—É–º–Ω–∞—è –û–±–µ–∑—å—è–Ω–∫–∞" },
                { id: "emotion-4", title: "–°—Ç—Ä–∞—Ö: –®—ë–ø–æ—Ç –≤ –¢–µ–Ω–∏" },
                { id: "emotion-5", title: "–£–¥–∏–≤–ª–µ–Ω–∏–µ: –ü—Ç–∏—Ü–∞ –ß—É–¥–µ—Å" },
            ],
            "–°–µ—Ä–∏—è –û—Å–Ω–æ–≤—ã": [
                { id: "basic-1", title: "–†—ã—Ü–∞—Ä—å –ú—ã–ª—å–Ω–æ–≥–æ –ö–ª–∏–Ω–∫–∞" },
                { id: "basic-2", title: "–†—ã—Ü–∞—Ä—å –ó—É–±–Ω–æ–≥–æ –ö–ª–∏–Ω–∫–∞" },
                { id: "basic-3", title: "–ö—Ä–µ—Å—Ç–æ–Ω–æ—Å–µ—Ü –ü—É–∑—ã—Ä–µ–π" },
                { id: "basic-4", title: "–†—ã—Ü–∞—Ä—å –ü—Ä–∞—á–µ—á–Ω–æ–π" },
            ]
        };

        // --- Populate Order Form Checkboxes ---
        const bookSelectionList = document.getElementById('book-selection-list');
        for (const series in ALL_BOOKS) {
            const seriesTitle = document.createElement('h4');
            seriesTitle.className = 'col-span-full font-semibold text-gray-700 mt-2';
            seriesTitle.textContent = series;
            bookSelectionList.appendChild(seriesTitle);
            ALL_BOOKS[series].forEach(book => {
                const label = document.createElement('label');
                label.className = 'flex items-center space-x-2 cursor-pointer';
                label.innerHTML = `
                    <input type="checkbox" name="selected_books" value="${book.id}" class="h-5 w-5 rounded border-gray-300 text-orange-500 focus:ring-orange-400">
                    <span>${book.title}</span>
                `;
                bookSelectionList.appendChild(label);
            });
        }
        
        // --- Modal Elements ---
        const imageModal = document.getElementById('imageModal');
        const orderModal = document.getElementById('orderModal');
        
        const modalImg = document.getElementById('modalImageSrc');
        const modalTitle = document.getElementById('modalTitle');

        const imageModalCloseBtn = document.querySelector('.image-modal-close');
        const orderModalCloseBtn = document.querySelector('.order-modal-close');
        
        const generalOrderButtons = document.querySelectorAll('.order-btn');
        const orderFromImageModalBtn = document.querySelector('.order-from-modal-btn');
        
        const orderForm = document.getElementById('order-form');
        const photoInput = document.getElementById('child_photo');
        const photoPreview = document.getElementById('photo-preview');

        // --- Modal Control Functions ---
        const openModal = (modal) => { modal.style.display = 'flex'; };
        const closeModal = (modal) => { modal.style.display = 'none'; };

        // --- Event Listeners ---

        // Open Image Modal when a book card is clicked
        document.querySelectorAll('.book-card').forEach(card => {
            card.addEventListener('click', function() {
                const imgSrc = this.dataset.imgSrc;
                const title = this.dataset.title;
                const bookId = this.dataset.bookId;
                
                openModal(imageModal);
                modalImg.src = imgSrc;
                modalImg.onerror = () => { this.src = `https://placehold.co/1414x2000/CCCCCC/FFFFFF?text=Image+Not+Found`; };
                modalTitle.textContent = title;
                orderFromImageModalBtn.dataset.bookId = bookId; // Pass book ID to button
            });
        });

        // Open Order Modal from general buttons
        generalOrderButtons.forEach(button => {
            button.addEventListener('click', (e) => {
                e.preventDefault();
                openModal(orderModal);
            });
        });
        
        // Open Order Modal from image modal, and pre-select the book
        orderFromImageModalBtn.addEventListener('click', (e) => {
            closeModal(imageModal);
            openModal(orderModal);
            
            // Uncheck all books first
            document.querySelectorAll('#book-selection-list input[type="checkbox"]').forEach(cb => cb.checked = false);
            
            // Check the selected book
            const bookIdToSelect = e.target.dataset.bookId;
            if (bookIdToSelect) {
                const checkbox = document.querySelector(`input[type="checkbox"][value="${bookIdToSelect}"]`);
                if (checkbox) checkbox.checked = true;
            }
        });
        
        // Handle photo preview
        photoInput.addEventListener('change', function() {
            const file = this.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    photoPreview.style.backgroundImage = `url('${e.target.result}')`;
                }
                reader.readAsDataURL(file);
            }
        });

        // Handle Final Order Form Submission
        orderForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const formData = new FormData(orderForm);
            const selectedBooks = formData.getAll('selected_books');
            
            if (selectedBooks.length === 0) {
                 alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É –∫–Ω–∏–≥—É.');
                 return;
            }

            // You can process the data here (e.g., send to a server)
            let message = `–°–ø–∞—Å–∏–±–æ –∑–∞ –∑–∞–∫–∞–∑!\n\n`;
            message += `–ò–º—è —Ä–µ–±–µ–Ω–∫–∞: ${formData.get('child_name')}\n`;
            message += `–í–æ–∑—Ä–∞—Å—Ç: ${formData.get('child_age')}\n`;
            message += `–¢–µ–ª–µ—Ñ–æ–Ω: ${formData.get('phone_number')}\n`;
            message += `–í—ã–±—Ä–∞–Ω–Ω—ã–µ –∫–Ω–∏–≥–∏: ${selectedBooks.join(', ')}\n`;
            if (formData.get('child_photo').name) {
                message += `–§–æ—Ç–æ: ${formData.get('child_photo').name}\n`;
            }
            
            alert(message); // For demonstration
            orderForm.reset();
            photoPreview.style.backgroundImage = '';
            closeModal(orderModal);
        });

        // --- General Modal Closing Logic ---
        imageModalCloseBtn.addEventListener('click', () => closeModal(imageModal));
        orderModalCloseBtn.addEventListener('click', () => closeModal(orderModal));

        window.addEventListener('click', function(event) {
            if (event.target == imageModal) closeModal(imageModal);
            if (event.target == orderModal) closeModal(orderModal);
        });

        document.addEventListener('keydown', function(event) {
            if (event.key === "Escape") {
                closeModal(imageModal);
                closeModal(orderModal);
            }
        });
    });
    </script>
</body>
</html>

